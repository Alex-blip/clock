(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6b6a610"],{"1cf2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("i-form",{attrs:{model:t.page,inline:"","label-width":80}},[n("form-item",{attrs:{label:"名字"}},[n("i-input",{attrs:{type:"text",placeholder:"名字"},model:{value:t.page.name,callback:function(e){t.$set(t.page,"name",e)},expression:"page.name"}})],1),n("form-item",{attrs:{label:"表达式"}},[n("i-input",{attrs:{type:"text",placeholder:"表达式"},model:{value:t.page.expression,callback:function(e){t.$set(t.page,"expression",e)},expression:"page.expression"}})],1),n("form-item",{attrs:{label:"当前状态"}},[n("i-select",{staticStyle:{width:"200px"},model:{value:t.page.status,callback:function(e){t.$set(t.page,"status",e)},expression:"page.status"}},[n("Option",{attrs:{value:"0"}},[t._v("全部")]),n("Option",{attrs:{value:"1"}},[t._v("等待")]),n("Option",{attrs:{value:"2"}},[t._v("开始")]),n("Option",{attrs:{value:"3"}},[t._v("成功")]),n("Option",{attrs:{value:"4"}},[t._v("失败")])],1)],1),n("i-button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.loadPage}},[t._v("查询")]),t._v("   \n      "),n("i-button",{attrs:{type:"success",icon:"ios-add-circle"},on:{click:t.windowAddContainer},model:{value:t.showPut,callback:function(e){t.showPut=e},expression:"showPut"}},[t._v("新增\n      ")])],1)],1),n("div",[n("Table",{attrs:{border:"",columns:t.columns,data:t.containers},scopedSlots:t._u([{key:"disable",fn:function(e){var a=e.row;return[n("i-switch",{attrs:{size:"large"},on:{"on-change":function(e){return t.changeContainer(a)}},model:{value:a.disable,callback:function(e){t.$set(a,"disable",e)},expression:"row.disable"}})]}},{key:"action",fn:function(e){var a=e.row;return[n("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){return t.viewConfig(a)}}},[t._v("配置")]),n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.rowPutContainer(a)}}},[t._v("编辑")]),n("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.confirmRemove(a)}}},[t._v("删除")]),n("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){return t.runContainer(a)}}},[t._v("运行")])]}}])}),n("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:t.page.total,"page-size":t.page.count,"show-sizer":""},on:{"on-change":t.changePageIndex,"on-page-size-change":t.changePageSize}})],1)])],1),n("div",[n("Modal",{attrs:{title:"编辑"},on:{"on-ok":t.updateContainer},model:{value:t.showPut,callback:function(e){t.showPut=e},expression:"showPut"}},[n("i-form",{ref:"form",attrs:{model:t.container,"label-width":80}},[n("FormItem",{attrs:{label:"容器ID"}},[n("i-input",{attrs:{disabled:""},model:{value:t.container.cid,callback:function(e){t.$set(t.container,"cid",e)},expression:"container.cid"}})],1),n("FormItem",{attrs:{label:"任务描述"}},[n("i-input",{model:{value:t.container.name,callback:function(e){t.$set(t.container,"name",e)},expression:"container.name"}})],1),n("FormItem",{attrs:{label:"表达式"}},[n("i-input",{model:{value:t.container.expression,callback:function(e){t.$set(t.container,"expression",e)},expression:"container.expression"}})],1),n("FormItem",{attrs:{label:"禁用任务"}},[n("i-switch",{model:{value:t.container.disable,callback:function(e){t.$set(t.container,"disable",e)},expression:"container.disable"}})],1)],1)],1)],1)])},i=[],o=(n("6b54"),n("66df")),s=function(t){return o["a"].request({url:"container",method:"get",params:t})},r=function(t){return o["a"].request({url:"container",method:"put",data:t})},c=function(t){var e="container/"+t;return o["a"].request({url:e,method:"delete"})},l=function(t){return o["a"].request({url:"container/run",method:"get",params:{cid:t.cid}})},u=n("c276"),p={name:"ContainerList",mounted:function(){this.loadPage()},data:function(){var t=this;return{containers:[],showPut:!1,page:{expression:"",name:"",order:"cid",status:0,total:0,index:1,count:20},container:{cid:0,name:"",expression:"",disable:!1},statusBtn:{1:{props:{type:"info",size:"small",icon:"md-arrow-down"},text:"等待"},2:{props:{type:"primary",size:"small",loading:!0},text:"进行"},3:{props:{type:"success",size:"small",icon:"md-checkmark"},text:"成功"},4:{props:{size:"small",type:"error",icon:"md-close"},text:"失败"}},search:"",columns:[{title:"状态",key:"status",width:"120",render:function(e,n){var a=n.row.status,i=t.statusBtn[a.toString()];return e("Button",{props:i.props},i.text)}},{title:"容器ID",key:"cid",width:"80"},{title:"操作时间",key:"update_at",render:function(t,e){var n=e.row.update_at;console.log(n);var a=Object(u["c"])(n);return t("Span",{},a)}},{title:"禁用任务",key:"disable",slot:"disable",width:"100"},{title:"容器名",key:"name",tooltip:!0},{title:"表达式",key:"expression"},{title:"操作",key:"action",align:"center",slot:"action",width:"240"}]}},methods:{loadPage:function(){var t=this;s(this.page).then((function(e){t.containers=e.items,t.page.total=e.page.total}))},updateContainer:function(){var t=this;r(this.container).then((function(){t.$Message.success("操作成功~"),t.loadPage()}))},rowPutContainer:function(t){this.container=t,this.showPut=!0},windowAddContainer:function(){this.container={cid:0,name:"",expression:"",disable:!1},this.showPut=!0},changePageIndex:function(t){this.page.index=t,this.loadPage()},changePageSize:function(t){this.page.index=1,this.page.count=t,this.loadPage()},runContainer:function(t){var e=this;this.$Message.info("开启任务"),l(t).then((function(){e.$Message.success("运行成功")})),this.loadPage()},confirmRemove:function(t){var e=this;this.$Modal.confirm({title:"确认",content:"<p>是否删除当前任务</p>",onOk:function(){e.remove(t)}})},remove:function(t){var e=this;c(t.cid).then((function(){e.$Message.success("删除成功~"),e.loadPage()}))},changeContainer:function(t){var e=this;r(t).then((function(){e.$Message.success("操作成功~"),e.loadPage()}))},viewConfig:function(t){this.$router.push({name:"container-config",params:{cid:t.cid}})}}},d=p,f=n("2877"),m=Object(f["a"])(d,a,i,!1,null,null,null);e["default"]=m.exports},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),i=n("0bfb"),o=n("9e1e"),s="toString",r=/./[s],c=function(t){n("2aba")(RegExp.prototype,s,t,!0)};n("79e5")((function(){return"/a/b"!=r.call({source:"a",flags:"b"})}))?c((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):r.name!=s&&c((function(){return r.call(this)}))}}]);