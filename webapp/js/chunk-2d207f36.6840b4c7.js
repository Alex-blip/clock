(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d207f36"],{a35c:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("Modal",{attrs:{title:"日志显示"},model:{value:t.showBig,callback:function(e){t.showBig=e},expression:"showBig"}},[a("div",[a("highlight-code",{attrs:{lang:"shell",code:t.showLog},model:{value:t.showLog,callback:function(e){t.showLog=e},expression:"showLog"}})],1)])],1),a("div",[a("i-form",{attrs:{model:t.page,inline:"","label-width":80}},[a("form-item",{attrs:{label:"关键字"}},[a("i-input",{attrs:{type:"text",placeholder:"名字或描述"},model:{value:t.page.keyword,callback:function(e){t.$set(t.page,"keyword",e)},expression:"page.keyword"}})],1),a("form-item",{attrs:{label:"容器ID"}},[a("InputNumber",{model:{value:t.page.cid,callback:function(e){t.$set(t.page,"cid",e)},expression:"page.cid"}})],1),a("form-item",{attrs:{label:"任务ID"}},[a("InputNumber",{model:{value:t.page.tid,callback:function(e){t.$set(t.page,"tid",e)},expression:"page.tid"}})],1),a("form-item",{attrs:{label:"排列条件"}},[a("i-select",{staticStyle:{width:"200px"},model:{value:t.page.order,callback:function(e){t.$set(t.page,"order",e)},expression:"page.order"}},[a("Option",{attrs:{value:"cid"}},[t._v("CID")]),a("Option",{attrs:{value:"update_at"}},[t._v("更新时间")])],1)],1),a("form-item",{attrs:{label:"起始时间"}},[a("DatePicker",{attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"起始时间选择"},on:{"on-change":t.showDate,"on-clear":t.clearDate}})],1),a("i-button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.loadPage}},[t._v("查询")]),t._v("   \n      "),a("i-button",{attrs:{type:"error",icon:"md-close"},on:{click:t.confirmDeleteLogs}},[t._v("删除")]),t._v("   \n    ")],1)],1),a("Table",{attrs:{border:"",columns:t.columns,data:t.logs},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.row;return[a("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){return t.viewLog(o)}}},[t._v("详情")])]}}])}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.page.total,"page-size":t.page.count,"show-sizer":""},on:{"on-change":t.changePageIndex,"on-page-size-change":t.changePageSize}})],1)])],1)},i=[],n=a("66df"),s=function(t){return n["a"].request({url:"log",method:"get",params:t})},l=function(t){return n["a"].request({url:"log",method:"delete",params:t})},r=a("c276"),c={name:"LogList",mounted:function(){this.$route.params.tid&&(this.page.tid=this.$route.params.tid),this.loadPage()},data:function(){return{showBig:!1,showLog:"",logs:[],selectDate:"",page:{total:0,index:1,count:10,tid:0,lid:0,cid:0,left_ts:0,right_ts:0},columns:[{title:"#ID",key:"lid",width:"100"},{title:"#任务ID",key:"tid",width:"100"},{title:"#容器ID",key:"cid",width:"100"},{title:"终端错误",key:"std_err",tooltip:!0},{title:"终端信息",key:"std_out",tooltip:!0},{title:"运行时间",key:"update_at",render:function(t,e){var a=e.row.update_at,o=Object(r["c"])(a);return t("Span",{},o)}},{title:"操作",key:"action",align:"center",slot:"action",width:"120"}]}},methods:{loadPage:function(){var t=this;s(this.page).then((function(e){t.logs=e.items,t.page.total=e.page.total}))},clearDate:function(){this.selectDate=[],this.page.left_ts=0,this.page.right_ts=0},showDate:function(t){if(t&&2===t.length&&t[0]&&t[1]){var e=t[0];e=new Date(e),e&&(this.page.left_ts=e.getTime()/1e3);var a=t[1];a=new Date(a),a&&(this.page.right_ts=a.getTime()/1e3)}},confirmDeleteLogs:function(){var t=this;this.$Modal.confirm({title:"确认",content:"<p>是否删除选中日志?</p>",onOk:function(){t.dropLogs()}})},dropLogs:function(){var t=this;l(this.page).then((function(){t.$Message.success("删除成功!")}))},changePageIndex:function(t){this.page.index=t,this.loadPage()},changePageSize:function(t){this.page.count=t,this.loadPage()},viewLog:function(t){var e=[];e.push("===STD_OUT===\n"),e.push(t.std_out),e.push("\n===STD_ERR===\n"),e.push(t.std_err),this.showLog=e.join(""),this.showBig=!0}}},d=c,g=a("2877"),u=Object(g["a"])(d,o,i,!1,null,"9f428e16",null);e["default"]=u.exports}}]);